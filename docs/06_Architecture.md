## 6 Системный дизайн

### 6.1 Контекстная диаграмма архитектуры решения

**[ИЗОБРАЖЕНИЕ: C4 Context Diagram]**

Система "Красные флажки" взаимодействует со следующими внешними компонентами:

- **Telegram Bot API** — интерфейс взаимодействия с пользователями
- **LLM API** (OpenAI, YandexGPT, GigaChat) — анализ текста и генерация отчётов
- **Векторная база данных** (Qdrant) — хранение и поиск рисков
- **PostgreSQL** — реляционная база данных для метаданных
- **КонсультантПлюс API** — проверка актуальности законов
- **Платёжная система** — обработка платежей

### 6.2 Диаграмма контейнеров архитектуры решения

**[ИЗОБРАЖЕНИЕ: C4 Container Diagram]**

Основные контейнеры системы:

1. **Telegram Bot** — фронтенд приложения
2. **n8n Orchestrator** — оркестратор рабочих процессов
3. **Parser Service** — парсинг документов, OCR
4. **Vector Store (Qdrant)** — векторное хранилище
5. **PostgreSQL** — реляционная база данных
6. **LLM Gateway** — прокси для работы с различными LLM
7. **Admin Panel** — административный интерфейс
